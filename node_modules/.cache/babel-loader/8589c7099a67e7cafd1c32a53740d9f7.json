{"ast":null,"code":"var _jsxFileName = \"D:\\\\GitHub\\\\rush_hud\\\\src\\\\HUD\\\\PlayerOverview\\\\PlayerOverview.tsx\";\nimport React from 'react';\nimport { avatars } from './../../api/avatars';\nimport { getCountry } from '../countries';\nimport \"./playeroverview.scss\";\nexport default class PlayerOverview extends React.Component {\n  constructor(...args) {\n    super(...args);\n\n    this.sum = data => data.reduce((a, b) => a + b, 0);\n\n    this.getData = () => {\n      const {\n        veto,\n        player,\n        round\n      } = this.props;\n      if (!player || !veto || !veto.rounds) return null;\n      const stats = veto.rounds.map(round => round.players[player.steamid]).filter(data => !!data);\n      const overall = {\n        damage: this.sum(stats.map(round => round.damage)),\n        kills: this.sum(stats.map(round => round.kills)),\n        killshs: this.sum(stats.map(round => round.killshs))\n      };\n      const data = {\n        adr: stats.length !== 0 ? (overall.damage / (round - 1)).toFixed(0) : '0',\n        kills: overall.kills,\n        killshs: overall.kills,\n        kpr: stats.length !== 0 ? (overall.kills / stats.length).toFixed(2) : 0,\n        hsp: overall.kills !== 0 ? (100 * overall.killshs / overall.kills).toFixed(0) : '0'\n      };\n      return data;\n    };\n\n    this.calcWidth = (val, max) => {\n      const value = Number(val);\n      if (value === 0) return 0;\n      let maximum = max;\n\n      if (!maximum) {\n        maximum = Math.ceil(value / 100) * 100;\n      }\n\n      if (value > maximum) {\n        return 100;\n      }\n\n      return 100 * value / maximum;\n    };\n  }\n\n  render() {\n    const {\n      player,\n      veto,\n      players\n    } = this.props;\n    const data = this.getData();\n    if (!player || !veto || !veto.rounds || !data) return null;\n    let url = null; // const avatarData = avatars.find(avatar => avatar.steamid === player.steamid);\n\n    const avatarData = avatars[player.steamid];\n\n    if (avatarData && avatarData.url) {\n      url = avatarData.url;\n    }\n\n    const countryName = player.country ? getCountry(player.country) : null;\n    let side = '';\n    const inGamePlayer = players.find(inGamePlayer => inGamePlayer.steamid === player.steamid);\n    if (inGamePlayer) side = inGamePlayer.team.side;\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: `player-overview ${this.props.show ? 'show' : ''} ${side}`,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 65,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"player-overview-picture\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 66,\n        columnNumber: 17\n      }\n    }, url ? /*#__PURE__*/React.createElement(\"img\", {\n      src: url,\n      alt: `${player.username}'s avatar`,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 67,\n        columnNumber: 28\n      }\n    }) : null), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"player-overview-username\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 69,\n        columnNumber: 17\n      }\n    }, player.username.toUpperCase()), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"player-overview-stats\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 71,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"player-overview-stat\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 72,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"label\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 73,\n        columnNumber: 25\n      }\n    }, \"KILLS: \", data.kills), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"panel\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 74,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"filling\",\n      style: {\n        width: `${this.calcWidth(data.kills, data.kills <= 30 ? 30 : 40)}%`\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 75,\n        columnNumber: 29\n      }\n    }))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"player-overview-stat\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 78,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"label\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 79,\n        columnNumber: 25\n      }\n    }, \"HS: \", data.hsp, \"%\"), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"panel\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 80,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"filling\",\n      style: {\n        width: `${this.calcWidth(data.hsp, 100)}%`\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 81,\n        columnNumber: 29\n      }\n    }))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"player-overview-stat\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 84,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"label\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 85,\n        columnNumber: 25\n      }\n    }, \"ADR: \", data.adr), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"panel\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 86,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"filling\",\n      style: {\n        width: `${this.calcWidth(data.adr)}%`\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 87,\n        columnNumber: 29\n      }\n    }))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"player-overview-stat\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 90,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"label\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 91,\n        columnNumber: 25\n      }\n    }, \"KPR: \", data.kpr), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"panel\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 92,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"filling\",\n      style: {\n        width: `${this.calcWidth(Number(data.kpr) * 100)}%`\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 93,\n        columnNumber: 29\n      }\n    })))));\n  }\n\n}","map":{"version":3,"sources":["D:/GitHub/rush_hud/src/HUD/PlayerOverview/PlayerOverview.tsx"],"names":["React","avatars","getCountry","PlayerOverview","Component","sum","data","reduce","a","b","getData","veto","player","round","props","rounds","stats","map","players","steamid","filter","overall","damage","kills","killshs","adr","length","toFixed","kpr","hsp","calcWidth","val","max","value","Number","maximum","Math","ceil","render","url","avatarData","countryName","country","side","inGamePlayer","find","team","show","username","toUpperCase","width"],"mappings":"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","sourcesContent":["import React from 'react';\nimport * as I from '../../api/interfaces';\nimport { avatars } from './../../api/avatars';\nimport { apiUrl } from '../../api/api';\nimport { getCountry } from '../countries';\nimport { Player } from 'csgogsi-socket';\nimport \"./playeroverview.scss\";\n\ninterface IProps {\n    player: I.Player,\n    show: boolean,\n    veto: I.Veto | null\n    players: Player[],\n    round: number\n}\n\nexport default class PlayerOverview extends React.Component<IProps> {\n    sum = (data: number[]) => data.reduce((a, b) => a + b, 0);\n\n    getData = () => {\n        const { veto, player, round } = this.props;\n        if(!player || !veto || !veto.rounds) return null;\n        const stats = veto.rounds.map(round => round.players[player.steamid]).filter(data => !!data);\n        const overall = {\n            damage: this.sum(stats.map(round => round.damage)),\n            kills: this.sum(stats.map(round => round.kills)),\n            killshs: this.sum(stats.map(round => round.killshs)),\n        };\n        const data = {\n            adr: stats.length !== 0 ? (overall.damage/(round-1)).toFixed(0) : '0',\n            kills: overall.kills,\n            killshs: overall.kills,\n            kpr: stats.length !== 0 ? (overall.kills/stats.length).toFixed(2) : 0,\n            hsp: overall.kills !== 0 ? (100*overall.killshs/overall.kills).toFixed(0) : '0'\n        }\n        return data;\n    }\n    calcWidth = (val: number | string, max?: number) => {\n        const value = Number(val);\n        if(value === 0) return 0;\n        let maximum = max;\n        if(!maximum) {\n            maximum = Math.ceil(value/100)*100;\n        }\n        if(value > maximum){\n            return 100;\n        }\n        return 100*value/maximum;\n    }\n\trender() {\n        const { player, veto, players } = this.props;\n        const data = this.getData();\n        if(!player || !veto || !veto.rounds || !data) return null;\n        let url = null;\n        // const avatarData = avatars.find(avatar => avatar.steamid === player.steamid);\n        const avatarData = avatars[player.steamid];\n        if(avatarData && avatarData.url){\n            url = avatarData.url;\n        }\n        const countryName = player.country ? getCountry(player.country) : null;\n        let side = '';\n        const inGamePlayer = players.find(inGamePlayer => inGamePlayer.steamid === player.steamid);\n        if(inGamePlayer) side = inGamePlayer.team.side;\n\t\treturn (\n            <div className={`player-overview ${this.props.show ? 'show':''} ${side}`}>\n                <div className=\"player-overview-picture\">\n                    {url ? <img src={url} alt={`${player.username}'s avatar`}/> : null}\n                </div>\n                <div className=\"player-overview-username\">{player.username.toUpperCase()}</div>\n\n                <div className=\"player-overview-stats\">\n                    <div className=\"player-overview-stat\">\n                        <div className=\"label\">KILLS: {data.kills}</div>\n                        <div className=\"panel\">\n                            <div className=\"filling\" style={{width:`${this.calcWidth(data.kills, data.kills <= 30 ? 30 : 40)}%`}}></div>\n                        </div>\n                    </div>\n                    <div className=\"player-overview-stat\">\n                        <div className=\"label\">HS: {data.hsp}%</div>\n                        <div className=\"panel\">\n                            <div className=\"filling\" style={{width:`${this.calcWidth(data.hsp, 100)}%`}}></div>\n                        </div>\n                    </div>\n                    <div className=\"player-overview-stat\">\n                        <div className=\"label\">ADR: {data.adr}</div>\n                        <div className=\"panel\">\n                            <div className=\"filling\" style={{width:`${this.calcWidth(data.adr)}%`}}></div>\n                        </div>\n                    </div>\n                    <div className=\"player-overview-stat\">\n                        <div className=\"label\">KPR: {data.kpr}</div>\n                        <div className=\"panel\">\n                            <div className=\"filling\" style={{width:`${this.calcWidth(Number(data.kpr)*100)}%`}}></div>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        );\n\t}\n}\n"]},"metadata":{},"sourceType":"module"}